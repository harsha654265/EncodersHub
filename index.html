<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encoders Hub</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        header {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 1em;
        }
        .search-bar {
            text-align: center;
            margin: 20px 0;
        }
        .search-bar input {
            padding: 10px;
            width: 300px;
            font-size: 16px;
        }
        .section {
            margin: 20px;
        }
        .section h2 {
            color: #333;
        }
        .card-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            width: 200px;
            padding: 10px;
            text-align: center;
        }
        .card img {
            max-width: 100%;
            border-radius: 5px;
        }
        .card h3 {
            font-size: 1.1em;
            margin: 10px 0;
        }
        .card p {
            font-size: 0.9em;
            color: #666;
        }
        .download-links a {
            display: block;
            margin: 5px 0;
            color: #007BFF;
            text-decoration: none;
        }
        .download-links a:hover {
            text-decoration: underline;
        }
        .error {
            color: red;
            font-weight: bold;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
        footer {
            text-align: center;
            padding: 20px;
            background-color: #333;
            color: white;
            position: relative;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <header>
        <h1>ðŸŽ¬ Encoders Hub ðŸŽ¬</h1>
        <p>ðŸš€ Use Brave Browser for GDFlix to avoid ads! ðŸš€</p>
    </header>

    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search by title, hero, genre, etc." onkeyup="searchContent()">
    </div>

    <div class="section" id="featuredSection">
        <h2>Featured</h2>
        <div id="featuredContent" class="card-container">
            <p class="loading">Loading featured content...</p>
        </div>
    </div>

    <div class="section" id="moviesSection">
        <h2>All Movies</h2>
        <div id="moviesContent" class="card-container">
            <p class="loading">Loading movies...</p>
        </div>
    </div>

    <div class="section" id="webSeriesSection">
        <h2>Web Series</h2>
        <div id="webSeriesContent" class="card-container">
            <p class="loading">Loading web series...</p>
        </div>
    </div>

    <footer>
        <p>Powered by Encoders Hub</p>
        <p>All of the free movies found on this website are hosted on third-party servers that are freely available to watch online for all internet users. Any legal issues regarding the free online movies on this website should be taken up with the actual file hosts themselves, as we're not affiliated with them.</p>
        <p>Â© 2025 Encoders Hub. All Rights Reserved.</p>
    </footer>

    <script src="x9_data_dump.js" defer></script>
    <script src="webseries.js" defer></script>
    <script defer>
        function createCard(item) {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <img src="${item.img}" alt="${item.title}">
                <h3>${item.title}</h3>
                <p>Genres: ${item.genres.join(', ')}</p>
                <p>Runtime: ${item.runtime}</p>
                <p>Release Date: ${item.releaseDate}</p>
                <p>Tags: ${item.tags.join(', ')}</p>
                <p>Heroes: ${item.heroes.join(', ')}</p>
                <p>Heroines: ${item.heroines.length ? item.heroines.join(', ') : 'N/A'}</p>
                <p>Directors: ${item.directors.join(', ')}</p>
                <div class="download-links">
                    ${item.downloadLinks.map(link => `<a href="${link.link}" target="_blank">${link.quality}</a>`).join('')}
                </div>
            `;
            return card;
        }

        function displayMovies() {
            const moviesContent = document.getElementById('moviesContent');
            moviesContent.innerHTML = ''; // Clear loading message

            if (!window.movieData || window.movieData.length === 0) {
                moviesContent.innerHTML = '<p class="error">Error: Failed to load movies data. Retrying...</p>';
                console.error('Movies data not found or empty:', window.movieData);
                setTimeout(() => {
                    if (confirm('Failed to load movies data. Would you like to reload the page?')) {
                        window.location.reload();
                    }
                }, 2000);
                return;
            }

            window.movieData.forEach(movie => {
                const card = createCard(movie);
                moviesContent.appendChild(card);
            });
        }

        function displayWebSeries() {
            const webSeriesContent = document.getElementById('webSeriesContent');
            webSeriesContent.innerHTML = ''; // Clear loading message

            if (!window.webSeriesData || window.webSeriesData.length === 0) {
                webSeriesContent.innerHTML = '<p class="error">Error: Failed to load web series data. Retrying...</p>';
                console.error('Web series data not found or empty:', window.webSeriesData);
                setTimeout(() => {
                    if (confirm('Failed to load web series data. Would you like to reload the page?')) {
                        window.location.reload();
                    }
                }, 2000);
                return;
            }

            window.webSeriesData.forEach(series => {
                const card = createCard(series);
                webSeriesContent.appendChild(card);
            });
        }

        function displayFeatured() {
            const featuredContent = document.getElementById('featuredContent');
            featuredContent.innerHTML = ''; // Clear loading message

            const allContent = [];
            if (window.movieData) allContent.push(...window.movieData);
            if (window.webSeriesData) allContent.push(...window.webSeriesData);

            if (allContent.length === 0) {
                featuredContent.innerHTML = '<p class="error">Error: Failed to load featured content. Retrying...</p>';
                console.error('Featured content not found or empty');
                setTimeout(() => {
                    if (confirm('Failed to load featured content. Would you like to reload the page?')) {
                        window.location.reload();
                    }
                }, 2000);
                return;
            }

            const featuredItems = allContent.sort(() => 0.5 - Math.random()).slice(0, 3);
            featuredItems.forEach(item => {
                const card = createCard(item);
                featuredContent.appendChild(card);
            });
        }

        function searchContent() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const allContent = [];
            if (window.movieData) allContent.push(...window.movieData);
            if (window.webSeriesData) allContent.push(...window.webSeriesData);

            const filteredContent = allContent.filter(item =>
                item.title.toLowerCase().includes(searchTerm) ||
                item.genres.some(genre => genre.toLowerCase().includes(searchTerm)) ||
                item.tags.some(tag => tag.toLowerCase().includes(searchTerm)) ||
                item.heroes.some(hero => hero.toLowerCase().includes(searchTerm)) ||
                item.heroines.some(heroine => heroine.toLowerCase().includes(searchTerm)) ||
                item.directors.some(director => director.toLowerCase().includes(searchTerm))
            );

            const moviesContent = document.getElementById('moviesContent');
            const webSeriesContent = document.getElementById('webSeriesContent');
            const featuredContent = document.getElementById('featuredContent');

            moviesContent.innerHTML = '';
            webSeriesContent.innerHTML = '';
            featuredContent.innerHTML = '';

            const filteredMovies = filteredContent.filter(item => window.movieData.includes(item));
            const filteredSeries = filteredContent.filter(item => window.webSeriesData.includes(item));

            filteredMovies.forEach(movie => {
                const card = createCard(movie);
                moviesContent.appendChild(card);
            });

            filteredSeries.forEach(series => {
                const card = createCard(series);
                webSeriesContent.appendChild(card);
            });

            const featuredItems = filteredContent.sort(() => 0.5 - Math.random()).slice(0, 3);
            featuredItems.forEach(item => {
                const card = createCard(item);
                featuredContent.appendChild(card);
            });
        }

        // Initialize content after scripts are loaded
        window.addEventListener('load', () => {
            try {
                displayFeatured();
                displayMovies();
                displayWebSeries();
            } catch (error) {
                console.error('Error initializing content:', error);
                const sections = ['featuredContent', 'moviesContent', 'webSeriesContent'];
                sections.forEach(section => {
                    document.getElementById(section).innerHTML = '<p class="error">Error: Failed to load content. Please try reloading the page.</p>';
                });
                setTimeout(() => {
                    if (confirm('Failed to load content. Would you like to reload the page?')) {
                        window.location.reload();
                    }
                }, 2000);
            }
        });
    </script>
</body>
</html>
